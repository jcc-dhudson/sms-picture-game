{"mappings":"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","sources":["js/submissions.js"],"sourcesContent":["var $table = $('#fresh-table')\nconst options = {\n    timeZone:\"US/Eastern\",\n    hour12 : false,\n    hour:  \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\"\n  };\nvar sasKey\n\nwindow.operateStatus = {\n    'click .status': function (e, value, row, index) {\n        $('#scoreModal-submitScore').data('submission-id', row.id)\n        $('#newScore').val(row.score)\n        $('#scoreModal').modal('show')\n        $.get('/getsasuri?rel=thumbs/' + row.transform.thumbnail, function(data){\n            $('#put-thumb-uri-here').attr('src', data)\n            if(row.transform.kind == 'image') {\n                $('#scoreModal-body').html('<img  src=\"'+data+'\" width=\"100%\" />')\n            } else if (row.transform.kind == 'video') {\n                $('#scoreModal-body').html('<video width=\"100%\" autoplay controls><source src=\"'+data+'\"></video>')\n            }\n        })\n        $('#setScore').off()\n        $('#setScore').click(function(){\n            $.ajax('/setscore/' + row.token, {\n                data : JSON.stringify({score: $('#newScore').val()}),\n                contentType : 'application/json',\n                type : 'POST',\n                \n            }).done(function(){\n                console.log(row)\n                $table.bootstrapTable('updateByUniqueId', {\n                    id: row.id,\n                    row: {\n                      score: $('#newScore').val(),\n                      status: 'Scored'\n                }})\n                $('#scoreModal').modal('hide')\n            })\n        })\n        $('#reassign').click(function(){\n            $('#scoreModal').modal('hide')\n            $('#reassignModal-title').html('Reassigning ' + row.person_name + '\\'s submission')\n            var btnHtml = ''\n            for (i = 0; i < groups.length; i++) {\n                group = groups[i]\n                if(group.group_id == row.group_id){\n                    btnHtml += '<button class=\"btn btn-primary\" type=\"button\">'+group.group_name+'</button>'\n                } else {\n                    btnHtml += '<button class=\"groupAssign btn btn-secondary\" type=\"button\" data-group-name=\"'+group.group_name+'\" data-group-id=\"'+group.group_id+'\">'+group.group_name+'</button>'\n                }\n            }\n            $('#reassignModal-body').html(btnHtml)\n            $('#reassignModal').modal('show')\n            $('.groupAssign').click(function() {\n                group_id = $(this).data('group-id')\n                group_name = $(this).data('group-name')\n                $.ajax('/reassign/' + row.token, {\n                    data : JSON.stringify({'group_id': group_id, 'group_name': group_name}),\n                    contentType : 'application/json',\n                    type : 'PATCH',\n                }).done(function(){\n                    console.log(row.id)\n                    $table.bootstrapTable('updateByUniqueId', {\n                        id: row.id,\n                        row: {\n                            group_name: group_name,\n                            group_id: group_id\n                        }})\n                        $('#reassignModal').modal('hide')\n                })\n                \n            })\n        })\n        $('#downloadOriginal').click(function(){\n            filename = row.token + '_' + row.original_filename\n            download('/getsasuri?download=' + row.token + '&filename=' + filename)\n        })\n    }\n}\nwindow.operateRound = {\n    'click .round': function (e, value, row, index) {\n        $table.bootstrapTable('resetSearch', row.round)\n    }\n}\n\n\n\n//\n// table formatters\n//\nfunction groupFormatter(value, row, index) {\n    return '<b><div class=\"badge bg-light text-dark\">'+ value + '</div></b>'\n}\nfunction statusFormatter(value, row, index) {\n    if(value != undefined){\n        return '<a class=\"table-action status\" href=\"javascript:void(0)\">'+ value + '</a>'\n    }\n}\nfunction roundFormatter(value, row, index) {\n    return '<div class=\"badge bg-warning text-dark round\">'+ value + '</div>'\n}\n\n$(function () {\n    $table.bootstrapTable({\n      classes: 'table table-hover table-striped',\n      toolbar: '.toolbar',\n  \n      search: true,\n      pagination: false,\n      striped: true,\n      sortable: true,\n      uniqueId: \"id\",\n      sortName: \"datetime\",\n      sortOrder: \"desc\",\n    })\n  })\n\n\n  function download(fileUrl) {\n    var a = document.createElement(\"a\");\n    a.href = fileUrl;\n    a.click();\n  }"],"names":["$table","$","options","timeZone","hour12","hour","minute","second","sasKey","groupFormatter","value","row","index","statusFormatter","undefined","roundFormatter","download","fileUrl","a","document","createElement","href","click","window","operateStatus","e","data","id","val","score","modal","get","transform","thumbnail","attr","kind","html","off","ajax","token","JSON","stringify","contentType","type","done","console","log","bootstrapTable","status","person_name","btnHtml","i","groups","length","group","group_id","group_name","this","filename","original_filename","operateRound","round","classes","toolbar","search","pagination","striped","sortable","uniqueId","sortName","sortOrder"],"version":3,"file":"submissions.830cad0f.js.map"}